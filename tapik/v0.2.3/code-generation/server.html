<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Spring WebMVC Controllers :: tapik</title>
    <meta name="generator" content="Antora 3.1.14">
<link rel="stylesheet" href="../../../_/css/site.css">
<link rel="stylesheet" href="../../../_/css/search.css">
<link rel="stylesheet" href="../../../_/css/custom.css">
<script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs'; mermaid.initialize({"startOnLoad":true});</script>  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../..">tapik</a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="navbar-burger" aria-controls="topbar-nav" aria-expanded="false" aria-label="Toggle main menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/makiftutuncu/tapik" target="_blank" rel="noopener noreferrer">GitHub</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="tapik" data-version="v0.2.3">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../index.html">tapik</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Guides</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../getting-started.html">Getting Started</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../user-guide.html">User Guide</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Concepts</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../concepts/type-safety.html">Type Safety</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Code Generation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="client.html">Spring RestClient Clients</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="server.html">Spring WebMVC Controllers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="documentation.html">Markdown Documentation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Contributing</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../development.html">Development Guide</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="api/index.html">API Reference</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">tapik</a></li>
    <li>Code Generation</li>
    <li><a href="server.html">Spring WebMVC Controllers</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">v0.2.3</button>
  <div class="version-menu">
    <a class="version" href="../../code-generation/server.html">v0.2.6</a>
    <a class="version" href="../../v0.2.5/code-generation/server.html">v0.2.5</a>
    <a class="version" href="../../v0.2.4/code-generation/server.html">v0.2.4</a>
    <a class="version is-current" href="server.html">v0.2.3</a>
    <a class="version" href="../../v0.2.2/code-generation/server.html">v0.2.2</a>
    <a class="version" href="../../v0.2.1/code-generation/server.html">v0.2.1</a>
  </div>
</div>
<div class="edit-this-page"><a href="https://github.com/makiftutuncu/tapik/blob/v0.2.3/docs/modules/ROOT/pages/code-generation/server.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Spring WebMVC Controllers</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The spring-webmvc generator turns tapik endpoints into Spring MVC controller contracts. Implement the generated interfaces to keep routing, validation, and response typing aligned with the DSL.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_generated_structure"><a class="anchor" href="#_generated_structure"></a>Generated Structure</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>Location</strong>: build/generated/sources/tapik/main/kotlin/&lt;package&gt;/&lt;SourceFile&gt;Controller.kt</p>
</li>
<li>
<p><strong>Interface name</strong>: &lt;SourceFile&gt;Controller</p>
</li>
<li>
<p><strong>Annotations</strong>: Each method is decorated with the appropriate @GetMapping, @PostMapping, &#8230;&#8203; annotations derived from the endpoint metadata, including path, consumes, and produces attributes.</p>
</li>
<li>
<p><strong>Parameters</strong>: Path variables receive @SpringPathVariable, query parameters use @RequestParam, headers use @RequestHeader, and bodies use @RequestBody. Default values defined in the DSL are carried into the annotation attributes.</p>
</li>
<li>
<p><strong>Return type</strong>: Methods return tapik ResponseX or ResponseWithoutBodyX types. When multiple outputs exist, the return type is OneOfK&lt;...&gt; containing those responses.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example excerpt:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-kotlin hljs" data-lang="kotlin">interface ProductEndpointsController {
    /**
     * Fetch product details.
     */
    @GetMapping(
        path = ["/products/{productId}"],
        produces = ["application/json"]
    )
    fun getProduct(
        @SpringPathVariable("productId") productId: UUID,
        @RequestParam(name = "locale", required = false, defaultValue = "en-US") locale: String,
        @RequestHeader(name = "X-Request-Id") xRequestId: UUID
    ): Response0&lt;ProductView&gt;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementing_controllers"><a class="anchor" href="#_implementing_controllers"></a>Implementing Controllers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Wire an implementation in your Spring application:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-kotlin hljs" data-lang="kotlin">@Component
class ProductHandler : ProductEndpointsController {
    override fun getProduct(
        productId: UUID,
        locale: String,
        xRequestId: UUID
    ): Response0&lt;ProductView&gt; {
        // fetch domain model and map it into the tapik response type
        val product = service.lookup(productId, locale)
        return Response0(Status.OK, product)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The return value captures the HTTP status, headers, and body exactly as you modelled them in the DSL. Use helper builders from dev.akif.tapik (for example, Response0, ResponseWithoutBody1, OneOf2.Option1) to produce the response variant that matches the status you intend to emit.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rendering_spring_responses"><a class="anchor" href="#_rendering_spring_responses"></a>Rendering Spring Responses</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Create a lightweight HTTP adapter that converts the tapik response to a Spring ResponseEntity using the extensions in TapikResponseEntity.kt:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-kotlin hljs" data-lang="kotlin">@RestController
class ProductController(
    private val handler: ProductHandler
) {
    @GetMapping("/products/{productId}")
    fun getProduct(
        productId: UUID,
        locale: String,
        xRequestId: UUID
    ): ResponseEntity&lt;Any?&gt; =
        ProductEndpoints.getProduct.toResponseEntity(
            handler.getProduct(productId, locale, xRequestId)
        )
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>toResponseEntity(Response&lt;*&gt;) handles single-output endpoints.</p>
</li>
<li>
<p>toResponseEntity(OneOf) handles multi-output unions.</p>
</li>
<li>
<p>Status and media-type conversions rely on Status.toHttpStatus() and MediaType.toSpringMediaType() helpers bundled with the generator.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_status_and_header_validation"><a class="anchor" href="#_status_and_header_validation"></a>Status and Header Validation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>toResponseEntity enforces that your implementation returns the declared number of headers and selects the matching output variant for OneOf unions. If a mismatch occurs (for example, returning Option2 while only one output is defined), the helper throws an error pointing at the offending endpoint.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tips_for_server_implementations"><a class="anchor" href="#_tips_for_server_implementations"></a>Tips for Server Implementations</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Reuse DSL metadata</strong>: The generated interface references the HttpEndpoint instances, so you can lean on .outputs or .parameters inside your implementation for additional logic (for example, building links).</p>
</li>
<li>
<p><strong>Combine with Spring validation</strong>: Annotate generated parameters with additional validation annotations (e.g., @Valid, @NotBlank) in partial classes or wrapper controllers if you need extra constraints.</p>
</li>
<li>
<p><strong>Return domain models</strong>: The response builders accept your domain types. Keep encoding logic inside the DSL via codecs so controller implementations stay small.</p>
</li>
<li>
<p><strong>Unit-test with tapik types</strong>: Write tests against the generated interface contracts to verify that every response path returns the appropriate Response* wrapper. Pair with the toResponseEntity helper for end-to-end tests.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_customising_routing"><a class="anchor" href="#_customising_routing"></a>Customising Routing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The generator chooses method-level annotations based on the HTTP verb. For uncommon verbs (such as OPTIONS or TRACE), it emits @RequestMapping(method = [RequestMethod.VERB], path = [...]). If you need additional attributes (for example, security annotations or custom @CrossOrigin settings), declare them in your concrete controller implementation-interfaces are kept lean on purpose.</p>
</div>
</div>
</div>
<div class="pagination-container">
  <hr>
  <nav class="pagination">
    <span class="prev"><a href="client.html">Spring RestClient Clients</a></span>
    <span class="next"><a href="documentation.html">Markdown Documentation</a></span>
  </nav>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script>window.uiRootPath = '../../../_'</script>
<script src="../../../_/js/site.js"></script>

<script src="../../../_/js/vendor/lunr.js"></script>
<script id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" src="../../../_/js/search-ui.js"></script>
<script src="../../../search-index.js"></script>
  </body>
</html>
